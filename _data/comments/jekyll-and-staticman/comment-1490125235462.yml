_id: 4083cb60-0e6e-11e7-ba33-add746872269
name: Matthew Morris
email: ''
url: 'http://idiologos.netlify.com'
message: "Thanks for the compliment and the tip!\r\n\r\nI've been able to simplify my `comments.html` file a bit by removing paragraph tags one by one to see what caused the formatting to break. I removed and re-added the paragraph tags around the message text, and it didn't seem to have any effect other than to squash the message text up against the date when I removed the tags. Through the process of elimination, I discovered that the crucial tag was the `<p>` tag above the Liquid `assign` tag. If I removed it, the formatting in the posted comments was displayed as raw HTML, except for the portions in Markdown. If I tried to close the tag, a raw `</p>` tag would show up after the last posted comment.\r\n\r\nI realized the root of the problem likely had to do with the interplay between the HTML tags and the Liquid tags. I moved the problematic `<p>` tag below the `assign` tag, but above the `for` loop, and the formatting didn't break. Then I was able to close it by putting a `</p>` tag below the `endfor` tag. I realize I'm new to Liquid and Web template languages in general, but it seems odd to me that an `assign` tag would affect the display of HTML. Here is my `_includes/comments.html` file with the most recent revisions:\r\n\r\n~~~\r\n<hr>\r\n\r\n<!-- Static comments -->\r\n<!-- Partly based on Made Mistakes' comments.html file: -->\r\n<!-- https://github.com/mmistakes/minimal-mistakes/blob/master/_includes/comments.html -->\r\n<!-- Also partly based on Eduardo Boucas' reviews.html file -->\r\n<!-- https://github.com/eduardoboucas/popcorn/blob/gh-pages/_includes/reviews.html -->\r\n\r\n{% if site.data.comments[page.slug] %}\r\n\r\n  <p>\r\n    <h3>\r\n    {% if site.data.comments[page.slug].size > 1 %}\r\n      {{ site.data.comments[page.slug] | size }}\r\n    {% endif %}\r\n    Comments:\r\n    </h3>\r\n  </p>\r\n\r\n  <hr>\r\n\r\n  {% assign comments = site.data.comments[page.slug] | sort %}\r\n\r\n  <p>\r\n    {% for comment in comments %}\r\n      <br>\r\n      <legend><strong>{{ comment[1].name }}</strong></legend>\r\n      <em>{{ comment[1].date | date: \"%B %d, %Y\" }}</em>\r\n      <p>{{ comment[1].message | markdownify }}</p>\r\n      <hr>\r\n    {% endfor %}\r\n  </p>\r\n{% endif %}\r\n\r\n<!-- Comment form -->\r\n<p>\r\n  <h3>Post a comment:</h3>\r\n  <form method=\"POST\" action=\"https://api.staticman.net/v2/entry/{{ site.repository }}/{{ site.staticman.branch }}/comments\">\r\n    <input name=\"options[redirect]\" type=\"hidden\" value=\"http://idiologos.netlify.com\">\r\n    <input name=\"options[slug]\" type=\"hidden\" value=\"{{ page.slug }}\">\r\n      <div>\r\n      <legend>Name</legend>\r\n      <input name=\"fields[name]\" type=\"text\">\r\n    </div>\r\n    <div>\r\n      <legend>E-mail (optional)</legend>\r\n      <input name=\"fields[email]\" type=\"email\">\r\n    </div>\r\n    <div>\r\n      <legend>Website (optional)</legend>\r\n      <input name=\"fields[url]\" type=\"url\">\r\n    </div>\r\n    <div>\r\n      <legend>Message (<a href=\"https://kramdown.gettalong.org/syntax.html\">Markdown</a> allowed)</legend>\r\n      <textarea style=\"width:100%\" name=\"fields[message]\" rows=\"12\"></textarea>\r\n    </div>\r\n    <div>\r\n      <legend><em>Comments will appear after moderation.</em></legend>\r\n      <button type=\"submit\">Submit Comment</button>\r\n    </div>\r\n  </form>\r\n</p>\r\n~~~"
date: 1490125235
timestamp: 1490125235
